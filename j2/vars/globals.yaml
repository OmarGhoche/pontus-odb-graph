fileHeaders: 'DO NOT UPDATE THIS FILE MANUALLY; ANY CHANGES WILL BE OVERRIDEN BY THE J2 DIR TEMPLATES'

schema:
  propertyKeys:
    - name: similarity
      dataType: Double
      cardinality: SINGLE
    - name: probability
      dataType: Double
      cardinality: SINGLE
    - name: maxFromScore
      dataType: Double
      cardinality: SINGLE
    - name: fromScore
      dataType: Double
      cardinality: SINGLE
    - name: fromScorePercent
      dataType: Double
      cardinality: SINGLE
    - name: maxToScore
      dataType: Double
      cardinality: SINGLE
    - name: toScore
      dataType: Double
      cardinality: SINGLE
    - name: toScorePercent
      dataType: Double
      cardinality: SINGLE

    - name: Metadata.Type
    - name: Metadata.Controller
    - name: Metadata.Create_Date
      dataType: Date
    - name: Metadata.GDPR_Status
    - name: Metadata.Lineage
    - name: Metadata.Lineage_Location_Tag
    - name: Metadata.Lineage_Server_Tag
    - name: Metadata.Orig_Id
    - name: Metadata.Processor
    - name: Metadata.Redaction
    - name: Metadata.Status

      

  vertices:
#    - name: "Object.Sensitive_Data"
#      partition: false
#      useStatic: false
#      props:
#        - name: "Ethnicity"
#          dataType: "String"
#          cardinality: "SINGLE"
#          index: true
#        - name: "Religion"
#        - name: "Political_View"
#        - name: "Union_Membership"
#        - name: "Club_Membership"
#        - name: "Church_Membership"
#        - name: "Sexual_Orientation"

    - name: "Event.Consent"
      partition: false
      useStatic: false
      props:
        - name: Date
          dataType: Date
        - name: Form_Id
        - name: Form_Owner_Id
        - name: Form_Submission_Id
        - name: Form_Submission_Owner_Id
        - name: Metadata.Create_Date
          dataType: Date

        - name: Metadata.Update_Date
          dataType: Date

        - name: Status

    - name: "Event.Data_Breach"
      partition: false
      useStatic: false
      props:
        - name: Description
        - name: Id
        - name: Impact
        - name: Metadata.Create_Date
          dataType: Date

        - name: Metadata.Update_Date
          dataType: Date

        - name: Source
        - name: Status

    - name: "Event.Form_Ingestion"
      partition: false
      useStatic: false
      props:
        - name: Domain_b64
          index: false

        - name: Metadata_Create_Date
          dataType: Date

        - name: Metadata_GUID
        - name: Operation
        - name: Type

    - name: "Event.Group_Ingestion"
      partition: false
      useStatic: false
      props:
        - name: Has_Controller
          dataType: Boolean
        - name: Has_Data_Owner
          dataType: Boolean
        - name: Has_Processor
          dataType: Boolean
        - name: Metadata_End_Date
          dataType: Date
        - name: Metadata_Start_Date
          dataType: Date
        - name: Operation
        - name: Type

    - name: "Event.Ingestion"
      partition: false
      useStatic: false
      props:
        - name: Business_Rules
        - name: Domain_Unstructured_Data_b64
          index: false

        - name: Domain_b64
          index: false

        - name: Metadata_Create_Date
          dataType: Date
        - name: Metadata_GUID
        - name: Operation
        - name: Type

    - name: "Event.Subject_Access_Request"
      partition: false
      useStatic: false
      props:
        - name: Metadata.Create_Date
          dataType: Date
        - name: Metadata.Update_Date
          dataType: Date
        - name: Request_Type
        - name: Status

    - name: "Event.Training"
      partition: false
      useStatic: false
      props:
        - name: Status

    - name: "Event.Transaction"
      partition: false
      useStatic: false
      props:
        - name: Currency
        - name: Date
          dataType: Date

        - name: Description
        - name: Status
        - name: Type
        - name: Value

    - name: "Location.Address"
      partition: false
      useStatic: false
      props:
        - name: City
        - name: Code
        - name: Description
        - name: Full_Address
        - name: Neighborhood
        - name: Post_Code
        - name: State
        - name: Street
        - name: Type
        - name: parser.category
        - name: parser.city
        - name: parser.city_district
        - name: parser.country
        - name: parser.country_region
        - name: parser.entrance
        - name: parser.house
        - name: parser.house_number
        - name: parser.island
        - name: parser.level
        - name: parser.near
        - name: parser.po_box
        - name: parser.postcode
        - name: parser.road
        - name: parser.staircase
        - name: parser.state
        - name: parser.state_district
        - name: parser.suburb
        - name: parser.unit
        - name: parser.world_region

    - name: "Object.AWS_Instance"
      partition: false
      useStatic: false
      props:
        - name: EbsOptimized
        - name: EnaSupport
        - name: Id
        - name: ImageId
        - name: InstanceType
        - name: KeyName
        - name: LaunchTime
        - name: PrivateDnsName
        - name: PrivateIpAddress
        - name: ProductCodeIDs
        - name: ProductCodeTypes
        - name: Public_Dns_Name
        - name: Tags

    - name: "Object.AWS_Network_Interface"
      partition: false
      useStatic: false
      props:
        - name: AttachTime
        - name: Description
        - name: MacAddress
        - name: NetworkInterfaceId
        - name: PrivateDnsName
        - name: PrivateIpAddresses

    - name: "Object.AWS_Security_Group"
      partition: false
      useStatic: false
      props:
        - name: GroupName
        - name: Id
        - name: Ip_Perms_Egress_IpRanges
        - name: Ip_Perms_Ingress_IpRanges

    - name: "Object.AWS_VPC"
      partition: false
      useStatic: false
      props:
        - name: Id

    - name: "Object.Application"
      partition: false
      useStatic: false
      props:
        - name: Description
        - name: Form_Id
        - name: Form_Owner_Id
        - name: Form_Submission_Id
        - name: Form_Submission_Owner_Id
        - name: Name
        - name: Start_Date
          dataType: Date

        - name: Stop_Date
          dataType: Date
        - name: URL

    - name: "Object.Awareness_Campaign"
      partition: false
      useStatic: false
      props:
        - name: Description
        - name: Form_Id
        - name: Form_Owner_Id
        - name: Form_Submission_Id
        - name: Form_Submission_Owner_Id
        - name: Start_Date
          dataType: Date

        - name: Stop_Date
          dataType: Date

        - name: URL

    - name: "Object.Biometric"
      partition: false
      useStatic: false
      props:
        - name: Eye_Colour
        - name: Facial_Picture
        - name: Fingerprints
        - name: Height_cm
        - name: Retinal_scans
        - name: Weight_kg

    - name: "Object.Contract"
      partition: false
      useStatic: false
      props:
        - name: Date
          dataType: Date

        - name: Description
        - name: Expiry
        - name: Form_Id
        - name: Form_Owner_Id
        - name: Form_Submission_Id
        - name: Form_Submission_Owner_Id
        - name: Id
        - name: Link
        - name: Status
        - name: Type

    - name: "Object.Credential"
      partition: false
      useStatic: false
      props:
        - name: Login_SHA256
          index: false

        - name: User_Id

    - name: "Object.Data_Policy"
      partition: false
      useStatic: false
      props:
        - name: CreateDate
          dataType: Date

        - name: Description
        - name: Form_Id
        - name: Form_Owner_Id
        - name: Form_Submission_Id
        - name: Form_Submission_Owner_Id
        - name: Name
        - name: Retention_Period
        - name: Type
        - name: UpdateDate
          dataType: Date

    - name: "Object.Data_Procedures"
      partition: false
      useStatic: false
      props:
        - name: ID
        - name: BusinessAreaResponsible
        - name: Type
        - name: Description
        - name: MacroProcessName
        - name: Country_Where_Stored
        - name: Delete_Mechanism
        - name: Delete_URL
        - name: Info_Collected
        - name: Number_Of_Records_Monthly
        - name: Property
        - name: Type_Of_Natural_Person
        - name: Update_Mechanism
        - name: Update_URL
        - name: Why_Is_It_Collected
        - name: Is_SubProcess
          dataType: Boolean

    - name: "Object.Data_Source"
      partition: false
      useStatic: false
      props:
        - name: Business_Rules
        - name: Create_Date
          dataType: Date
        - name: Credential_ApiKey
        - name: Credential_Principal
        - name: Credential_Secret
        - name: Description
        - name: Domain
        - name: Domain_Frequency
        - name: Engine
        - name: Form_Id
        - name: Form_Owner_Id
        - name: Form_Submission_Id
        - name: Form_Submission_Owner_Id
        - name: Name
        - name: Retention_Policy_JSON
        - name: Type
        - name: URI_Config
        - name: URI_Control
        - name: URI_Delete
        - name: URI_Monitor
        - name: URI_Read
        - name: URI_Template
        - name: URI_Update
        - name: Update_Date
          dataType: Date


    - name: "Object.Email_Address"
      partition: false
      useStatic: false
      props:
        - name: Email
        - name: Host


    - name: "Object.Form"
      partition: false
      useStatic: false
      props:
        - name: Metadata_Create_Date
          dataType: Date
        - name: Metadata_GUID
        - name: Metadata_Owner
        - name: Text
        - name: URL
        - name: Vertex_Label

    - name: "Object.Genetic"
      partition: false
      useStatic: false
      props:
        - name: DNA
        - name: Family_Medical_History
        - name: RNA

    - name: "Object.Health"
      partition: false
      useStatic: false
      props:
        - name: Alergies
        - name: Blood_Type
        - name: Diseases
        - name: Organ_Donor

    - name: "Object.Identity_Card"
      partition: false
      useStatic: false
      props:
        - name: Id_Name
        - name: Id_Text
        - name: Id_Type
        - name: Id_Value

    - name: "Object.Insurance_Policy"
      partition: false
      useStatic: false
      props:
        - name: Form_Id
        - name: Form_Owner_Id
        - name: Form_Submission_Id
        - name: Form_Submission_Owner_Id
        - name: Number
        - name: Product_Type
        - name: Property_Type
        - name: Renewal_Date
          dataType: Date

        - name: Status
        - name: Type

    - name: "Object.Lawful_Basis"
      partition: false
      useStatic: false
      props:
        - name: Description
        - name: Id
        - name: Short_Description
    - name: "Object.Metadata_Source"
      partition: false
      useStatic: false
      props:
        - name: Name
        - name: Create_Date
          dataType: Date
        - name: Update_Date
          dataType: Date
        - name: Form_Id
        - name: Form_Owner_Id
        - name: Form_Submission_Id
        - name: Form_Submission_Owner_Id
        - name: Description
        - name: Credential_Principal
        - name: Credential_Secret
        - name: Credential_ApiKey
        - name: URI_Config
        - name: URI_Template
        - name: URI_Control
        - name: URI_Read
        - name: URI_Delete
        - name: URI_Update
        - name: URI_Monitor
        - name: Retention_Policy_JSON
        - name: Engine
        - name: Type
        - name: Domain
        - name: Domain_Frequency
        - name: Business_Rules

    - name: "Object.Notification_Templates"
      partition: false
      useStatic: false
      props:
        - name: Id
        - name: Label
        - name: Text
        - name: Types
        - name: URL

    - name: "Object.Phone_Number"
      partition: false
      useStatic: false
      props:
        - name: Last_7_Digits
        - name: Numbers_Only
        - name: Raw
        - name: Type

    - name: "Object.Privacy_Impact_Assessment"
      partition: false
      useStatic: false
      props:
        - name: Compliance_Check_Passed
        - name: Country_Where_Data_Is_Stored
        - name: Delivery_Date
          dataType: Date

        - name: Description
        - name: Form_Id
        - name: Form_Owner_Id
        - name: Form_Submission_Id
        - name: Form_Submission_Owner_Id
        - name: Intrusion_On_Privacy
        - name: Risk_Of_Reputational_Damage
        - name: Risk_To_Corporation
        - name: Risk_To_Individuals
        - name: Start_Date
          dataType: Date


    - name: "Object.Privacy_Notice"
      partition: false
      useStatic: false
      props:
        - name: Country_Where_Stored
        - name: Delivery_Date
          dataType: Date

        - name: Description
        - name: Effect_On_Individuals
        - name: Expiry_Date
          dataType: Date
        - name: Form_Id
        - name: Form_Owner_Id
        - name: Form_Submission_Id
        - name: Form_Submission_Owner_Id
        - name: How_Is_It_Collected
        - name: How_Will_It_Be_Used
        - name: Id
        - name: Info_Collected
        - name: Likely_To_Complain
        - name: Metadata.Create_Date
          dataType: Date
        - name: Metadata.Update_Date
          dataType: Date
        - name: Number_Of_Records_Monthly
        - name: Text
        - name: URL
        - name: Who_Is_Collecting
        - name: Who_Will_It_Be_Shared
        - name: Why_Is_It_Collected

    - name: "Object.Salary"
      partition: false
      useStatic: false
      props:
        - name: Currency
        - name: Period
        - name: Value

    - name: "Object.Sensitive_Data"
      partition: false
      useStatic: false
      props:
        - name: Church_Membership
        - name: Club_Membership
        - name: Ethnicity
        - name: Political_View
        - name: Religion
        - name: Sexual_Orientation
        - name: Union_Membership

    - name: "Person.Employee"
      partition: false
      useStatic: false
      props:
        - name: Date_Of_Birth
          dataType: Date
        - name: Ethnicity
        - name: Full_Name
        - name: Gender
        - name: Height
        - name: ID
        - name: Is_GDPR_Role
        - name: Last_Name
        - name: Marital_Status
        - name: Name_Qualifier
        - name: Nationality
        - name: Place_Of_Birth
        - name: Religion
        - name: Role
        - name: Title

    - name: "Person.Identity"
      partition: false
      useStatic: false
      props:
        - name: Date_Of_Birth
          dataType: Date
        - name: Ethnicity
        - name: First_Name
        - name: Full_Name
        - name: Full_Name_fuzzy
          mapping: "TEXTSTRING"
          analyzer: { name: "text-analyzer", value: "pg_word_delimiter" }
        - name: Gender
        - name: Height
        - name: ID
        - name: Last_Name
        - name: Marital_Status
        - name: Name_Qualifier
        - name: Nationality
        - name: Place_Of_Birth
        - name: Religion
        - name: Title

    - name: "Person.Natural"
      partition: false
      useStatic: false
      props:
        - name: Customer_ID
        - name: Date_Of_Birth
          dataType: Date
        - name: Ethnicity
        - name: Full_Name
        - name: Full_Name_fuzzy
          mapping: "TEXTSTRING"
          analyzer: { name: "text-analyzer", value: "pg_word_delimiter" }
        - name: Gender
        - name: Height
        - name: Last_Name
        - name: Marital_Status
        - name: Name_Qualifier
        - name: Nationality
        - name: Place_Of_Birth
        - name: Religion
        - name: Title
        - name: Type

    - name: "Person.Organisation"
      partition: false
      useStatic: false
      props:
        - name: Department
        - name: Email
        - name: Fax
        - name: Form_Id
        - name: Form_Owner_Id
        - name: Form_Submission_Id
        - name: Form_Submission_Owner_Id
        - name: Name
        - name: Phone
        - name: Registration_Number
        - name: Sector
        - name: Short_Name
        - name: Tax_Id
        - name: Type
        - name: URL
        - name: orgCountrySet

#  - name: "Object.Health"
#
#
#  - name: "Object.Biometric"
#
#
#  - name: "Object.Genetic"
#
#
#  - name: "Event.Consent"
#
#
#  - name: "Event.Transaction"
#
#
#  - name: "Event.Data_Breach"
#
#
#  - name: "Event.Form_Ingestion"
#
#
#  - name: "Event.Ingestion"
#
#  - name: "Event.Group_Ingestion"
#
#  - name: "Event.Subject_Access_Request"
#
#  - name: "Event.Training"
#  - name: "Location.Address"
#
#  - name: "Object.AWS_Instance"
#
#  - name: "Object.AWS_Network_Interface"
#  - name: "Object.AWS_Security_Group"
#
#  - name: "Object.AWS_VPC"
#
#  - name: "Object.Application"
#
#  - name: "Object.Awareness_Campaign"
#
#
#  - name: "Object.Credential"
#
#  - name: "Object.Data_Procedures"
#
#  - name: "Object.Data_Source"
#
#  - name: "Object.Metadata_Source"
#
#  - name: "Object.Data_Policy"
#
#  - name: "Object.Email_Address"
#
#  - name: "Object.Form"
#
#
#  - name: "Object.Identity_Card"
#
#  - name: "Object.Insurance_Policy"
#
#  - name: "Object.Lawful_Basis"
#  - name: "Object.Contract"
#
#  - name: "Object.Notification_Templates"
#
#
#  - name: "Object.Phone_Number"
#
#  - name: "Object.Privacy_Impact_Assessment"
#
#  - name: "Object.Privacy_Notice"
#
#  - name: "Person.Identity"
#
#
#  - name: "Person.Natural"
#
#  - name: "Person.Employee"
#
#  - name: "Person.Organisation"
#

  edges:
  - name: Approved_Compliance_Check
  - name: Assigned_SAR_Request
  - name: Consent
  - name: Data_Impacted_By_Data_Breach
  - name: Event_Training_Awareness_Campaign
  - name: Event_Training_Person
  - name: Has_Address
  - name: Has_Application
  - name: Has_Column
  - name: Has_Contract
  - name: Has_Credential
  - name: Has_Data_Procedures
  - name: Has_Data_Source
  - name: Has_Department
  - name: Has_Egress_Peering
  - name: Has_Form_Ingestion_Event
  - name: Has_Id_Card
  - name: Has_Ingestion_Event
  - name: Has_Ingress_Peering
  - name: Has_Lawful_Basis_On
  - name: Has_Link
  - name: Has_Parent_Or_Guardian
  - name: Has_Phone
  - name: Has_Policy
  - name: Has_Privacy_Impact_Assessment
  - name: Has_Privacy_Notice
  - name: Has_Salary
  - name: Has_Security_Group
  - name: Has_Security_Group_Connectivity
  - name: Has_Semantic
  - name: Has_Sensitive_Data
    multiplicity: MULTI
    unidirected: false
  - name: Has_Server
  - name: Has_Table
  - name: Has_Transaction
  - name: Impacted_By_Data_Breach
  - name: Is_Alias
  - name: Is_Data_Controller
  - name: Is_Data_Owner
  - name: Is_Data_Processor
  - name: Is_Lead
  - name: Is_Located
  - name: Is_Responsible
  - name: Lives
  - name: Made_SAR_Request
  - name: Pays_Salary
  - name: Reports_To
  - name: Runs_On
  - name: Sent_Email_BCC
  - name: Sent_Email_CC
  - name: Sent_Email_To
  - name: Uses_Data_Source
  - name: Uses_Email
  - name: Works

rules:
  Base_Clientes_Folha_1___DADOS_CLIENTES_csv:
    vertices:
    - label: Person.Natural
      name: TITULAR

      props:
        Full_Name: "${pg_NOME?.trim().toUpperCase()}"
        Full_Name_fuzzy: "${pg_NOME?.trim().toUpperCase()}"
        Type:
          val: "cliente"
          excludeFromSearch: true

        Date_Of_Birth:
          val: "${pg_DATA_NASCIMENTO}"
          type: "java.util.Date"
          mandatoryInSearch: true
          predicate: "eq"

    #CONSENTIMENTO
    - label: Event.Consent
      props:
        Date:
          val: "${new Date()}"
          type: "java.util.Date"
          excludeFromSearch: true

        Metadata.Create_Date:
          val: "${new Date()}"
          type: "java.util.Date"
          excludeFromSearch: true

        Status:
          val: "${'X'.equals(pg_CONSENTIMENTO?.toUpperCase())?'Consentimento':'Sem Consentimento'}"
          excludeFromSearch: true


    - label: Object.Identity_Card
      props:
        Id_Value:
          val: "${pg_CPF.replaceAll('[^0-9]','')}"
          mandatoryInSearch: true

        Id_Type:
          val: "CPF"
          excludeFromSearch: true

    - label:  Object.Email_Address
      props:
        Email:  "${pg_EMAIL}"
    - label: Location.Address
      props:
        Full_Address: "${pg_IMOVEL} ${pg_BAIRRO}, Sao Paulo, SP"
    - label: Event.Transaction
      props:
        Type:
          val: "Venda"
          excludeFromSubsequenceSearch: true

        Description:
          val: "Venda da Propriedade"
          excludeFromSubsequenceSearch: true

        Date:
          val: "${new Date()}"
          type: "java.util.Date"
          excludeFromSearch: true

        Currency:
          val: "BRL"
          excludeFromSubsequenceSearch: true

        Value: "${pg_VALOR?.replaceAll('[^0-9\\\\.]','')}"
    - label: Person.Natural
      name: CORRETOR
      props:
        Name_Qualifier: "${pg_CORRETOR}"
        Type:
          val: "corretor"
          excludeFromSearch: true


    edges:
    - label: "Uses_Email"
      fromVertexName: "TITULAR"
      toVertexLabel: "Object.Email_Address"

    - label: "Has_Id_Card"
      fromVertexName: "TITULAR"
      toVertexLabel: "Object.Identity_Card"

    - label: "Has_Transaction"
      fromVertexName: "TITULAR"
      toVertexLabel: "Event.Transaction"

    - label: "Has_Transaction"
      fromVertexName: "CORRETOR"
      toVertexLabel: "Event.Transaction"

    - label: "Has_Transaction"
      fromVertexLabel: "Location.Address"
      toVertexLabel: "Event.Transaction"

    - label: "Consent"
      fromVertexLabel: "TITULAR"
      toVertexLabel: "Event.Consent"




  # CORRETOR,NOME,DATA_NASCIMENTO
  Base_Corretores_Folha_1___DADOS_CORRETORES_csv:
    vertices:
    - label: Person.Natural
      props:
        Full_Name: "${pg_NOME?.trim().toUpperCase()}"
        Full_Name_fuzzy: "${pg_NOME?.trim().toUpperCase()}"
        Type:
          val: "corretor"
          excludeFromSearch: true
        Name_Qualifier: "${pg_CORRETOR}"

        Natural.Date_Of_Birth:
          val: "${pg_DATA_NASCIMENTO}"
          type: "java.util.Date"
          mandatoryInSearch: true
          predicate: "eq"


      #CELULAR
    - label: Object.Phone_Number
      props:
        Raw:
          val: "${pg_CELULAR}"
          mandatoryInSearch: false
        Type:
          val: "Celular"
          excludeFromSubsequenceSearch: true
        Numbers_Only:
          val: "${(pg_CELULAR?.replaceAll('[^0-9]', '')?:'00000000')}"
          excludeFromSearch: true
          type: "[Ljava.lang.String;"
        Last_7_Digits:
          val: "${(((pg_CELULAR?.replaceAll('[^0-9]', ''))?:'0000000')[-7..-1])}"
          mandatoryInSearch: true
          type: "[Ljava.lang.String;"

    #CPF
    - label: Object.Identity_Card
      props:
        Id_Value:
          val: "${pg_CPF.replaceAll('[^0-9]','')}"
          mandatoryInSearch: true
        Id_Type:
          val: "CPF"
          excludeFromSearch: true

    # EMAIL
    - label: Object.Email_Address
      props:
        Email:  "${pg_EMAIL}"

    #ENDERECO,BAIRRO,CIDADE,UF,CEP
    - label: Location.Address
      props:
        Full_Address: "${pg_ENDERECO}, ${pg_BAIRRO},  ${pg_CIDADE} - ${pg_UF}, ${pg_CEP} "
        Type:
          val: "Business"
          excludeFromSearch: true


    edges:
    - label: "Uses_Email"
      fromVertexLabel: "Person.Natural"
      toVertexLabel: "Object.Email_Address"

    - label: "Has_Id_Card"
      fromVertexLabel: "Person.Natural"
      toVertexLabel: "Object.Identity_Card"

    - label: "Works"
      fromVertexLabel: "Person.Natural"
      toVertexLabel: "Location.Address"

    - label: "Lives"
      fromVertexLabel: "Person.Natural"
      toVertexLabel: "Location.Address"

  # NOME,,CORRETOR, RENDA,,CONSENTIMENTO

  Base_Leads_Incorporadora_Folha_1___LEADS_INCORPORADORA_csv:
    vertices:
      - label: Person.Natural
        props:
          Full_Name: "${pg_NOME?.trim().toUpperCase()}"
          Full_Name_fuzzy: "${pg_NOME?.trim().toUpperCase()}"
          Type:
            val: "leads"
            excludeFromSearch: true


      - label: Object.Salary
        props:
          Value:
            val: "${pg_RENDA?.replaceAll('[^0-9\\\\.]','')}"

#            type: "Double"
          Currency:
            val: "BRL"
            excludeFromSubsequenceSearch: true
          Period:
            val: "Mensal"
            excludeFromSubsequenceSearch: true


      - label: Person.Organisation
        name: CORRETOR
        props:
          Name: "${pg_CORRETOR}"
          Short_Name: "${pg_CORRETOR}"
          Type:
            val: "Corretora"
            excludeFromSearch: true


      #TELEFONE
      - label: Object.Phone_Number
        props:
          Raw:
            val: "${pg_TELEFONE}"
            mandatoryInSearch: false
          Type:
            val: "Celular"
            excludeFromSubsequenceSearch: true
          Numbers_Only:
            val: "${(pg_TELEFONE?.replaceAll('[^0-9]', '')?:'00000000')}"
            excludeFromSearch: true
            type: "[Ljava.lang.String;"
          Last_7_Digits:
            val: "${(((pg_TELEFONE?.replaceAll('[^0-9]', ''))?:'0000000')[-7..-1])}"
            mandatoryInSearch: true
            type: "[Ljava.lang.String;"

      #CONSENTIMENTO
      - label: Event.Consent
        props:
          Date:
            val: "${new Date()}"
            type: "java.util.Date"
            excludeFromSearch: true

          Metadata.Create_Date:
            val: "${new Date()}"
            type: "java.util.Date"
            excludeFromSearch: true

          Status:
            val: "${'X'.equals(pg_CONSENTIMENTO?.toUpperCase())?'Consentimento':'Sem Consentimento'}"
            excludeFromSearch: true

      # EMAIL
      - label: Object.Email_Address
        props:
          Email:  "${pg_EMAIL}"




      #END__IMOVEL
      - label: Location.Address
        props:
          Full_Address:
            val: "${pg_END__IMOVEL}"
    #        excludeFromUpdate: true

          Type:
            val: "Lead"
            excludeFromSearch: true

          Code:
            val: "{pg_IMOVEL_INTERESSE}"
            mandatoryInSearch: true

      - label: Event.Transaction
        props:
          Type:
            val: "Interesse"
            excludeFromSearch: true

          Description:
            val: "Compra da Propriedade"
            excludeFromSearch: true

          Currency:
            val: "BRL"
            excludeFromSearch: true

          Date:
            val: "${new Date()}"
            type: "java.util.Date"
            excludeFromSearch: true


      - label: Object.Data_Source
        props:
          Name: planilhas - S3
          Type: planilhas - S3
          Description: planilhas guardadas na AWS S3

      - label: Event.Group_Ingestion
        props:
          Metadata_Start_Date:
            val: "${pg_currDate}"
            mandatoryInSearch: true
            excludeFromSearch: false
            type: java.util.Date
          Metadata_End_Date:
            val: "${new Date()}"
            excludeFromSearch: true
            type: java.util.Date
          Type:
            val: planilhas - S3
            excludeFromSearch: true
          Operation:
            val: Structured Data Insertion
            excludeFromSearch: true

      - label: Event.Ingestion
        props:
          Type:
            val: planilhas - S3
            excludeFromSearch: true
          Operation:
            val: Structured Data Insertion
            excludeFromSearch: true
          Domain_b64:
            val: "${original_request?.bytes?.encodeBase64()?.toString()}"
            excludeFromSearch: true
          Metadata_Create_Date:
            val: "${new Date()}"
            excludeFromSearch: true
            type: java.util.Date






    edges:
      - label: Has_Ingestion_Event
        fromVertexLabel: Person.Natural
        toVertexLabel: Event.Ingestion
      - label: Has_Ingestion_Event
        fromVertexLabel: Event.Group_Ingestion
        toVertexLabel: Event.Ingestion
      - label: Has_Ingestion_Event
        toVertexLabel: Event.Group_Ingestion
        fromVertexLabel: Object.Data_Source


      - label: "Uses_Email"
        fromVertexLabel: "Person.Natural"
        toVertexLabel: "Object.Email_Address"

      - label: "Consent"
        fromVertexLabel: "Person.Natural"
        toVertexLabel: "Event.Consent"

#      - label: "Consent"
#        fromVertexLabel: "Person.Organisation"
#        toVertexLabel: "Event.Consent"

      - label: "Has_Salary"
        fromVertexLabel: "Person.Natural"
        toVertexLabel: "Object.Salary"

      - label: "Is_Responsible"
        fromVertexLabel: "Person.Natural"
        toVertexLabel: "Person.Organisation"

      - label: "Has_Transaction"
        fromVertexLabel: "Person.Natural"
        toVertexLabel: "Event.Transaction"

      - label: "Has_Transaction"
        fromVertexLabel: "Event.Transaction"
        toVertexLabel: "Location.Address"

      - label: "Has_Transaction"
        fromVertexLabel: "Person.Organisation"
        toVertexLabel: "Location.Address"

  contratos_imoveis:
    vertices:
    - label: Person.Natural
      percentageThreshold: 10
      props:
        Full_Name_fuzzy:
          #val: "${com.pontusvision.utils.NLPCleaner.filter(pg_nlp_res_person,(boolean)false,(Set<String>)personFilter) as String}"
          val: "${pg_nlp_res_person}"
          predicate: textContainsFuzzy
          type: "[Ljava.lang.String;"
          excludeFromUpdate: true
          mandatoryInSearch: true
          postProcessor: "${it?.toUpperCase()?.trim()}"
        Full_Name:
          #val: "${com.pontusvision.utils.NLPCleaner.filter(pg_nlp_res_person,(boolean)false,(Set<String>)personFilter) as String}"
          val: "${pg_nlp_res_person}"

          predicate: textContainsFuzzy
          type: "[Ljava.lang.String;"
          excludeFromUpdate: true
          postProcessor: "${it?.toUpperCase()?.trim()}"

    - label: Location.Address
      props:
        "parser.postcode":
          val: "${pg_nlp_res_post_code}"
          type: "[Ljava.lang.String;"
          excludeFromUpdate: true
          mandatoryInSearch: true
          postProcessorVar: eachPostCode
          postProcessor: "${com.pontusvision.utils.PostCode.format(eachPostCode)}"
    - label: Object.Email_Address
      props:
        Email:
          val: "${pg_nlp_res_emailaddress}"
          type: "[Ljava.lang.String;"
          excludeFromUpdate: true
          mandatoryInSearch: true

    - label: Event.Ingestion
      props:
        Type:
          val: PDF Form Files
          excludeFromSearch: true

        Operation:
          val: Unstructured Data Insertion
          excludeFromSearch: true

        Domain_b64:
          val: "${original_request?.bytes?.encodeBase64()?.toString()}"
          excludeFromSearch: true

        Metadata_Create_Date:
          val: "${new Date()}"
          excludeFromSearch: true
          type: java.util.Date

    - label: Object.Data_Source
      props:
        Name:
          val: Contratos
          mandatoryInSearch: true
          excludeFromUpdate: false

        Description:
          val: Contratos em AWS S3
          mandatoryInSearch: false
          excludeFromUpdate: false

        Type:
          val: Structured
          mandatoryInSearch: false
          excludeFromUpdate: false

    - label: Event.Group_Ingestion
      props:
        Metadata_Start_Date:
          val: "${pg_currDate}"
          mandatoryInSearch: true
          excludeFromSearch: false
          type: java.util.Date

        Metadata_End_Date:
          val: "${new Date()}"
          excludeFromSearch: true
          type: java.util.Date

        Type:
          val: Contratos em AWS S3
          excludeFromSearch: true

        Operation:
          val: Unstructured Data Insertion
          excludeFromSearch: true


    edges:
      - label: Has_Ingestion_Event
        fromVertexLabel: Person.Natural
        toVertexLabel: Event.Ingestion
      - label: Has_Ingestion_Event
        fromVertexLabel: Event.Group_Ingestion
        toVertexLabel: Event.Ingestion
      - label: Has_Ingestion_Event
        fromVertexLabel: Object.Data_Source
        toVertexLabel: Event.Group_Ingestion

